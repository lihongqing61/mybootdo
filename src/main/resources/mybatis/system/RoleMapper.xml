<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bootdo.system.dao.RoleDao">

    <select id="list" parameterType="com.bootdo.common.utils.Query" resultType="roleDO">
        select *
        from sys_role
        <include refid="list_where"></include>
        <choose>
            <when test="sort != null and sort != ''.toString()">
                order by ${sort} ${order}
            </when>
            <otherwise>
                order by role_id desc
            </otherwise>
        </choose>
        <if test="offset != null and limit != null">
          limit #{offset}, #{limit}
        </if>
    </select>

    <sql id="list_where">
        <where>
            <if test="roleId != null and roleId != ''">
                and role_id = #{roleId}
            </if>
            <if test="roleName != null and roleName != ''">
                and role_name = #{roleName}
            </if>
            <if test="roleSign != null and roleSign != ''">
                and role_sign = #{roleSign}
            </if>
            <if test="remark != null and remark != ''">
                and remark = #{remark}
            </if>
            <if test="userIdCreate != null and userIdCreate != ''">
                and user_id_create = #{userIdCreate}
            </if>
            <if test="gmtCreate != null and gmtCreate != ''">
                and gmt_create = #{gmtCreate}
            </if>
            <if test="gmtModified != null and gmtModified != ''">
                and gmt_modified = #{gmtModified}
            </if>
        </where>
    </sql>

    <select id="count" resultType="int">
        select count(*)
        from sys_role
        <include refid="list_where"></include>
    </select>

    <insert id="save" parameterType="com.bootdo.system.domain.RoleDO"
            useGeneratedKeys="true" keyProperty="roleId">
		insert into
		  sys_role
		(`role_name`, `role_sign`, `remark`, `user_id_create`, `gmt_create`,
		`gmt_modified`)
		values
		(#{roleName}, #{roleSign}, #{remark}, #{userIdCreate}, #{gmtCreate},
		#{gmtModified})
	</insert>
</mapper>